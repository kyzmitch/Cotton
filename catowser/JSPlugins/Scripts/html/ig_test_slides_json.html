<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <title>Test Instagram json slides</title>
    <script src="/js/ig.js"></script>
</head>
<body>
    <script>
        function handleNewJsonFile(input) {
            let files = input.files;
            if(typeof files === 'undefined'){
                return
            }
            let selectedFileName = files[0];
            if(typeof selectedFileName === 'undefined'){
                return
            }

            getAsText(selectedFileName)
        }

        function getAsText(readFile) {
            var reader = new FileReader();
            // Read file into memory as UTF-16
            reader.readAsText(readFile, "UTF-8");

            // Handle progress, success, and errors
            reader.onload = loaded;
            reader.onerror = errorHandler;
        }

        function loaded(evt) {
            // Obtain the read file data
            let fileString = evt.target.result;
            let filteredNodes = cottonTryExtractGrapthVideoNodes(JSON.parse(fileString));
            console.log(JSON.stringify(filteredNodes));
        }

        function errorHandler(evt) {
            console.log('file read: ' + evt.target.error.name);
        }
    </script>
    <form>
        <form>
            Select JSON file: <input type="file" accept=".json" name="igJsonFile" onchange="handleNewJsonFile(this)">
        </form>
    </form>
</body>